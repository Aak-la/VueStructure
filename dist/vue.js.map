{"version":3,"file":"vue.js","sources":["../src/init.js","../src/observer/arr.js","../src/observer/index.js","../src/initState.js","../src/index.js"],"sourcesContent":["export function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n    }\r\n\r\n}\r\n\r\n","let oldArrayProtoMethods = Array.prototype\r\nexport let ArrayProtoMethods = Object.create(oldArrayProtoMethods)\r\nlet methods = [\"push\", \"pop\", \"unshift\", \"shift\", \"splice\"]\r\nmethods.forEach(item => {\r\n    ArrayProtoMethods[item] = function (...args) {\r\n        let result = oldArrayProtoMethods[item].apply(this, args)\r\n        let inserted\r\n        switch (item) {\r\n            case \"push\":\r\n            case \"unshift\":\r\n                inserted = args\r\n                break;\r\n            case \"splice\":\r\n                inserted = args.splice(2);\r\n                break;\r\n        }\r\n\r\n        let ob = this.__ob__\r\n        if (inserted) {\r\n            ob.ObserverArray(inserted)\r\n        }\r\n        return result\r\n    }\r\n})","import { ArrayProtoMethods } from './arr';\r\nexport function observer(data) {\r\n    if (typeof data != 'object' || data == null) {\r\n        return data\r\n    }\r\n    return new Observer(data)\r\n}\r\nclass Observer {\r\n    constructor(value) {\r\n        Object.defineProperty(value, \"__ob__\", {\r\n            enumerable: false,\r\n            value: this\r\n        })\r\n        if (Array.isArray(value)) {\r\n            value.__proto__ = ArrayProtoMethods\r\n            this.ObserverArray(value)\r\n        } else {\r\n            this.walk(value)\r\n        }\r\n    }\r\n    walk(data) {\r\n        let keys = Object.keys(data)\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i]\r\n            let value = data[key]\r\n            defineReactive(data, key, value)\r\n        }\r\n    }\r\n    ObserverArray(value) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            observer(value[i])\r\n        }\r\n    }\r\n}\r\nfunction defineReactive(data, key, value) {\r\n    observer(value)\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if (newValue == value) return value\r\n            observer(newValue)\r\n            value = newValue\r\n        }\r\n    })\r\n}","import { observer } from \"./observer/index.js\"\r\n\r\nexport function initState(vm) {\r\n    let ops = vm.$options\r\n    if (ops.data) {\r\n        initData(vm)\r\n    }\r\n    if (ops.props) {\r\n        initProps(vm)\r\n    }\r\n    if (ops.watch) {\r\n        initWatch(vm)\r\n    }\r\n    if (ops.methods) {\r\n        initComputed(vm)\r\n    }\r\n    if (ops.computed) {\r\n        initMethods(vm)\r\n    }\r\n\r\n}\r\nfunction initData(vm) {\r\n    let data = vm.$options.data\r\n    data = vm._data = typeof data === \"function\" ? data.call(vm) : data\r\n    for (const key in data) {\r\n        proxy(vm, \"_data\", key)\r\n    }\r\n    observer(data)\r\n}\r\nfunction proxy(vm, source, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[source][key]\r\n        },\r\n        set(newValue) {\r\n            vm[source][key] = newValue\r\n        }\r\n\r\n    })\r\n\r\n}\r\nfunction initProps() {\r\n\r\n}\r\nfunction initWatch() {\r\n\r\n}\r\nfunction initComputed() {\r\n\r\n}\r\nfunction initMethods() {\r\n\r\n}","import { initMixin } from './init';\r\nimport { initState } from './initState';\r\nfunction Vue(options) {\r\n    this._init(options)\r\n    let vm = this\r\n    vm.$options = options,\r\n        initState(vm)\r\n    if (vm) {\r\n\r\n    }\r\n}\r\ninitMixin(Vue)\r\nexport default Vue"],"names":["initMixin","Vue","prototype","_init","options","oldArrayProtoMethods","Array","ArrayProtoMethods","Object","create","methods","forEach","item","_len","arguments","length","args","_key","result","apply","inserted","splice","ob","__ob__","ObserverArray","observer","data","_typeof","Observer","value","_classCallCheck","defineProperty","enumerable","isArray","__proto__","walk","_createClass","key","keys","i","defineReactive","get","set","newValue","initState","vm","ops","$options","initData","props","watch","computed","_data","call","proxy","source"],"mappings":"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"}